# ==============================================================================
# BLUEZ BLUETOOTH DAEMON CONFIGURATION
# ==============================================================================
# Location: /etc/bluetooth/main.conf
# Purpose: Configure Bluetooth stack for audio device auto-connection
#
# Generated by Ansible bluetooth_audio role
# ==============================================================================

[General]
# Device name visible to other Bluetooth devices
Name = {{ network.domain_name | default('frey') | capitalize }}

# Device class:
# 0x200408 = Audio/Video (Headset, Speaker, Microphone)
# This tells other devices what type of device this is
Class = 0x200408

# Discoverable timeout (0 = always discoverable for pairing)
DiscoverableTimeout = 0

# Pairable timeout (0 = always pairable)
PairableTimeout = 0

# Enable fast connectable mode for quick reconnection
FastConnectable = true

# Permanently enable Bluetooth on boot
AutoEnable = true

# Cache pairing information
RememberPowered = true

# Enable A2DP source (audio output TO Bluetooth speakers)
Enable=Source

# Enable A2DP sink (audio input FROM Bluetooth devices)
Enable=Sink

# Enable control (AVRCP - remote control for media)
Enable=Control

# Enable media (media player control)
Enable=Media

# Reconnection policy for audio devices
# always = Auto-reconnect to paired audio devices
ReconnectAttempts = 7
ReconnectIntervals = 1, 2, 4, 8, 16, 32, 64

[Policy]
# Automatically connect to previously paired devices
AutoConnect = true

# Reconnect on link-loss
ReconnectUUIDs = 0000110b-0000-1000-8000-00805f9b34fb  # Audio Sink
ReconnectUUIDs = 0000110a-0000-1000-8000-00805f9b34fb  # Audio Source
ReconnectUUIDs = 0000111e-0000-1000-8000-00805f9b34fb  # Handsfree
ReconnectUUIDs = 00001108-0000-1000-8000-00805f9b34fb  # Headset

[GATT]
# Enable GATT cache for faster reconnection
Cache = yes
KeySize = 16
ExchangeMTU = 517
Channels = 5

[LE]
# Low Energy settings (not used for audio, but included for completeness)
MinConnectionInterval = 15
MaxConnectionInterval = 50
ConnectionLatency = 0
ConnectionSupervisionTimeout = 0
Autoconnect = yes
