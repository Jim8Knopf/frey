# yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json
version: 1
metadata:
  name: Frey Hub - Service Accounts
  labels:
    blueprints.goauthentik.io/instantiate: "true"

entries:
  # Service Account for LDAP Bind (used by Jellyfin and other LDAP clients)
  - model: authentik_core.user
    id: ldap-bind-user
    identifiers:
      username: ldap_bind
    attrs:
      username: ldap_bind
      name: LDAP Bind Service Account
      email: ldap_bind@service.local
      is_active: true
      type: service_account
      path: users
      attributes:
        description: "Service account for LDAP authentication in Jellyfin and other services"
        ldap_unixhome: /home/ldap_bind
        ldapActive: true

  # Set password for LDAP bind user
  - model: authentik_core.user
    id: ldap-bind-user-password
    identifiers:
      username: ldap_bind
    attrs:
      password: "{{ authentik_ldap_bind_password }}"
