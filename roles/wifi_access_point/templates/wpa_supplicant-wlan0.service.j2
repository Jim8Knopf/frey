[Unit]
Description=WPA supplicant for {{ network.wifi.client_interface }}
After=network.target
# Note: NO network-online.target dependency - must work offline
Before=frey-wifi-roaming.service

[Service]
Type=simple
ExecStart=/sbin/wpa_supplicant -c /etc/wpa_supplicant/wpa_supplicant-{{ network.wifi.client_interface }}.conf -i {{ network.wifi.client_interface }} -D nl80211,wext
ExecReload=/bin/kill -HUP $MAINPID
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target