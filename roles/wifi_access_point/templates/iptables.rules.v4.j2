# Generated by Ansible - DO NOT EDIT MANUALLY
*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]

# Allow established connections
-A FORWARD -i {{ wifi.client_interface }} -o {{ wifi.interface }} -m state --state RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -i {{ wifi.interface }} -o {{ wifi.client_interface }} -j ACCEPT

# Allow DNS and DHCP on AP interface
-A INPUT -i {{ wifi.interface }} -p udp --dport 53 -j ACCEPT
-A INPUT -i {{ wifi.interface }} -p tcp --dport 53 -j ACCEPT
-A INPUT -i {{ wifi.interface }} -p udp --dport 67 -j ACCEPT

COMMIT

*nat
:PREROUTING ACCEPT [0:0]
:INPUT ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:POSTROUTING ACCEPT [0:0]

# NAT for AP network
-A POSTROUTING -s {{ wifi.network }} -o {{ wifi.client_interface }} -j MASQUERADE

COMMIT
