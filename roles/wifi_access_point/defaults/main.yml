---
# Minimal defaults for wifi_access_point role
# These are the essential variables used by templates and tasks.
network:
  wifi:
    # AP interface (recommend a secondary adapter, e.g. wlan1)
    interface: "wlan1"

    # Client/Uplink interface (the interface with internet access)
    client_interface: "wlan0"

    # AP (gateway) IP and network
    ip: "10.20.0.1"
    network: "10.20.0.0/24"

    # DHCP pool
    dhcp_range_start: "10.20.0.50"
    dhcp_range_end: "10.20.0.150"

    # SSID / password
    ssid: "FreyHub"
    password: "ChangeMe123"

    # Country and radio settings (minimal)
    country: "US"
    hw_mode: g
    channel: 7
    upstream_dns_servers:
      - "1.1.1.1"
      - "8.8.8.8"
    use_system_dns: true
    system_resolv_conf: "/etc/resolv.conf"
    power_management:
      disable_power_save: true
      extra_interfaces: []
    virtual_ap:
      enabled: false
      source_interface: "{{ network.wifi.client_interface }}"
      ensure_interval: 15
    connectivity_monitor:
      enabled: false  # Disabled by default; enable explicitly after confirming dhcpcd is working
      ping_target: null
      ping_count: 3
      failure_threshold: 1
      interval_seconds: 60
      restart_dhcpcd: true
      restart_wpa_supplicant: true
  # Enable NAT from AP network to client/uplink interface (optional)
  enable_nat: false
  # Method to persist NAT rules: 'iptables-persistent' or 'iptables-save'
  nat_persist_method: 'iptables-persistent'

  # DNS domain for local rewrites (top-level under network)
  domain_name: "frey"
  dns_rewrites: []

# Packages to install (kept minimal)
wifi_ap_packages:
  - hostapd
  - dnsmasq
  - dhcpcd5
  - iw
  - rfkill

# Safety guard: set to true to force apply even if the AP interface equals the control interface
force_apply: false
