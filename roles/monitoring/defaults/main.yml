---
# ==============================================================================
# MONITORING ROLE - DEFAULT VARIABLES
# ==============================================================================

monitoring:
  group:
    name: monitoring
    gid: 12341
  user:
    name: monitoring_manager
    uid: 12341
    groups: "{{ monitoring.group.name }}"
  dir: "{{ storage.base_dir }}/monitoring"
  dockge:
    enabled: true
    port: 5001
    image: "louislam/dockge"
    version: 1
  prometheus:
    enabled: true
    port: 9090
    image: "prom/prometheus"
    version: "latest"
  node-exporter:
    enabled: true
    port: 9100
    image: "prom/node-exporter"
    version: "latest"
  cadvisor:
    enabled: true
    port: 8081
    image: "gcr.io/cadvisor/cadvisor"
    version: "latest"
  grafana:
    enabled: true
    port: 3000
    image: "grafana/grafana"
    version: "latest"
    # OIDC/SSO Configuration (enabled when infrastructure.services.authentik.enabled is true)
    # All OAuth URLs use clean DNS names without ports (http://auth.frey)
    # Browser: auth.frey → AdGuard DNS → Traefik → Authentik
    # Backend: auth.frey → Traefik network alias → Traefik → Authentik
    # Works offline via AdGuard local DNS and Docker network aliases through Traefik
    oidc_client_id: "grafana"
    oidc_scopes: "openid profile email"
    oidc_auth_url: "{{ network.authentik_public_url }}/application/o/authorize/"
    oidc_token_url: "{{ network.authentik_public_url }}/application/o/token/"
    oidc_api_url: "{{ network.authentik_public_url }}/application/o/userinfo/"
    oidc_role_attribute_path: "contains(groups, 'grafana_admins') && 'Admin' || contains(groups, 'grafana_editors') && 'Editor' || 'Viewer'"
  loki:
    enabled: true
    port: 3100
    image: "grafana/loki"
    version: "latest"
  promtail:
    enabled: true
    image: "grafana/promtail"
    version: "latest"
  uptime-kuma:
    enabled: true
    port: 3001
    image: "louislam/uptime-kuma"
    version: 1
  watchtower:
    enabled: true
    image: "containrrr/watchtower"
    version: "latest"
  speedtest-tracker:
    enabled: true
    port: 8181
    image: "lscr.io/linuxserver/speedtest-tracker"
    version: "latest"
